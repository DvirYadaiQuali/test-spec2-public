spec_version: 2
description: a blueprint for a simple testing

inputs:
  hello_release_name:
    type: string
  agent_name:
    type: string

# values that starts with '{' for liquid template must be encosed with quotes so YAML won't consider them as dict
outputs:
  output1:
    value: '{{sandboxId}}'
#   output2:
#     value: '{{.inputs.input1}}'
  output3:
    value: '{{.grains.simple-tf.outputs.output1}}'
    

grains:
  simple-tf:
    kind: terraform
    spec:
      source:
#         store: test-spec2-public
#         path: terraform/simple-tf-module
        path: http://quali:BBDC-NDE1MTMxMTM3MTI5OvR+kIx4qlj+PNwMxoL9ILPpS9lu@my-bitbucket.bitbucket.svc.cluster.local:7990/scm/qual/test-spec2-public-small.git
      agent:
        name: '{{.inputs.agent_name}}'
      inputs:
#         - test_input1: env-input-{{.inputs.input1}}
        - test_input1: hardcoded value
        - test_input2: env-id-{{sandboxId}}
      outputs:
        - output1
        - output2
